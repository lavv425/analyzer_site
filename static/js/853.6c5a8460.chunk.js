"use strict";(self.webpackChunkanalyzer=self.webpackChunkanalyzer||[]).push([[853],{3853:(e,t,n)=>{n.r(t),n.d(t,{default:()=>C});var o=n(7528),a=n(5043);const r=async()=>{try{const e=await fetch("http://localhost:3001/api/retrieveRequests",{method:"GET"});if(!e.ok)throw new Error("HTTP Error! Status: ".concat(e.status));return(await e.json()).data}catch(e){console.error("Error:",e)}};var s,c,i,l,d,u=n(1970),p=n(966),h=n(927),f=n(3187),m=n(8939),y=n(1411),v=n(547),A=n(490),x=n(1906),b=n(579);const g=h.Ay.div(s||(s=(0,o.A)(["\nmargin:5vw 0vw 0vw 5vw;"]))),j=(0,h.Ay)(v.A)(c||(c=(0,o.A)(["\nz-index: 9999999 !important;\nposition: absolute;\nwidth: 100vw;\ntop:0;"]))),w=(0,h.Ay)(x.A)(i||(i=(0,o.A)(["\nwidth: 30%;\nborder:1px solid #a72020 !important;\nbackground:#e4e4e4 !important;\n"]))),S=h.Ay.div(l||(l=(0,o.A)(["\nmargin-top:30px;\ndisplay:flex;\nflex-direction: row;\njustify-content: center;\nalign-items: center;\ngap:20px;\n"]))),k=h.Ay.div(d||(d=(0,o.A)(["\nposition: fixed;\ntop: 0;\nleft: 0;\nwidth: 100%;\nheight: 100%;\nbackground: #d0d0d0ad;\nbackdrop-filter: blur(6px);\nz-index: 13;"]))),E=()=>{const[e,t]=(0,a.useState)(null),[n,o]=(0,a.useState)(null),[s,c]=(0,a.useState)(!0),[i,l]=(0,a.useState)(null),[d,h]=(0,a.useState)(null),[v,x]=(0,a.useState)(!1),[E,C]=(0,a.useState)(),[z,L]=(0,a.useState)(),[T,R]=(0,a.useState)(),[q,M]=(0,a.useState)(null),[N,P]=(0,a.useState)(!1),[O,F]=(0,a.useState)(null),[_,I]=(0,a.useState)(!1),[H,D]=(0,a.useState)(null);(0,a.useEffect)((()=>{if(v){const e=setTimeout((()=>{x(!1),P(!1)}),6e3);M(e)}}),[v]),(0,a.useEffect)((()=>{const e=()=>{I(!1),D(null)},t=t=>{t.target.closest(".modal")||e()},n=async()=>{c(!0);let t={type:null,uniqueId:null,newEmail:null,newSubject:null,newDescription:null};const n=document.querySelectorAll(".mod-field");for(const e of n){const n=e.getAttribute("name"),o=e.value;t[n]=o}console.log(t);const o={method:"PUT",headers:{"Content-Type":"application/json"},accept:"application/json",body:JSON.stringify(t)};try{const t=await fetch("http://localhost:3001/api/updateRequest",o),n=await t.json(),{status:a,message:s}=n;if(a){const t=await r();l(t[0].addReq),h(t[1].reports),e(),C("success"),L("Perfetto!"),R(s),x(!0)}else C("error"),L("Attenzione!"),R("".concat(s,'\n\rContattare il reparto development, possibilmente condividendo l\'errore e il "casus belli"')),e(),x(!0)}catch(a){C("error"),L("Attenzione!"),R("".concat(a,'\n\rContattare il reparto development, possibilmente condividendo l\'errore e il "casus belli"')),x(!0),console.error(a)}c(!1)};if(_){document.addEventListener("click",t);const o=document.querySelectorAll(".close");o.forEach((t=>{t.addEventListener("click",e)}));const a=document.querySelector(".save-mods");return a&&a.addEventListener("click",n),()=>{document.removeEventListener("click",t),o.forEach((t=>{t.removeEventListener("click",e)})),a&&a.removeEventListener("click",n)}}}),[_]);(0,a.useEffect)((()=>{(async()=>{const e=await r();l(e[0].addReq),h(e[1].reports),c(!1)})()}),[]),(0,a.useEffect)((()=>{if(i&&d){const e=["action",...Object.keys(i[0]),...Object.keys(i[0].nv)].filter((e=>!e.includes("nv")));t(e);const n=[...i.map((e=>{const{nv:t,...n}=e;return n.type=0===n.type?"Richiesta di aggiunta":"Segnalazione problematica",{...n,...t,action:(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(f.A,{style:{cursor:"pointer"},onClick:()=>J(e)})," ",(0,b.jsx)(m.A,{style:{cursor:"pointer"},onClick:()=>V(e)})," ",(0,b.jsx)(y.A,{style:{cursor:"pointer"},onClick:()=>G(e)})]})}})),...d.map((e=>{const{nv:t,...n}=e;return n.type=0===n.type?"Richiesta di aggiunta":"Segnalazione problematica",{...n,...t,action:(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(f.A,{style:{cursor:"pointer"},onClick:()=>J(e)})," ",(0,b.jsx)(m.A,{style:{cursor:"pointer"},onClick:()=>V(e)})," ",(0,b.jsx)(y.A,{style:{cursor:"pointer"},onClick:()=>G(e)})]})}}))];o(n)}}),[i,d]);const J=async e=>{const t={method:"POST",headers:{"Content-Type":"application/json"},accept:"application/json",body:JSON.stringify(e)};try{const e=await fetch("http://localhost:3001/api/body/ShowReqModal",t),n=await e.json();D(n.data),I(!0)}catch(n){C("error"),L("Attenzione!"),R("".concat(n,'\n\rContattare il reparto development, possibilmente condividendo l\'errore e il "casus belli"')),x(!0),console.error(n)}},V=async e=>{const t={method:"POST",headers:{"Content-Type":"application/json"},accept:"application/json",body:JSON.stringify(e)};try{const e=await fetch("http://localhost:3001/api/body/ShowReqModal/edit",t),n=await e.json();D(n.data),I(!0)}catch(n){C("error"),L("Attenzione!"),R("".concat(n,'\n\rContattare il reparto development, possibilmente condividendo l\'errore e il "casus belli"')),x(!0),console.error(n)}},G=async e=>{P(!0),F(e),C("warning"),L("Sei sicuro?"),R("Stai eliminando ".concat(e.type?"la segnalazione":"la richiesta"," in maniera definitiva.")),x(!0)};return(0,b.jsxs)(b.Fragment,{children:[_&&(0,b.jsx)(k,{dangerouslySetInnerHTML:{__html:H}}),s?(0,b.jsx)(u.A,{}):(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(g,{children:n&&(0,b.jsx)(p.A,{content:n,headers:e})})}),v&&(0,b.jsxs)(j,{className:"mui-alert",severity:E,onMouseEnter:()=>{clearTimeout(q)},onMouseLeave:()=>{const e=setTimeout((()=>{x(!1),P(!1)}),6e3);M(e)},children:[(0,b.jsx)(A.A,{children:z}),T,N&&(0,b.jsxs)(S,{children:[(0,b.jsx)(w,{variant:"filled",onClick:async()=>{c(!0),P(!1);const e={method:"DELETE",headers:{"Content-Type":"application/json"},accept:"application/json",body:JSON.stringify(O)};try{const t=await fetch("http://localhost:3001/api/deleteRequest",e),n=await t.json(),{status:o,message:a}=n;if(o){const e=await r();l(e[0].addReq),h(e[1].reports),C("success"),L("Perfetto!"),R(a),x(!0)}else C("error"),L("Attenzione!"),R("".concat(a,'\n\rContattare il reparto development, possibilmente condividendo l\'errore e il "casus belli"')),x(!0)}catch(t){console.error(t)}c(!1)},children:"Conferma"}),(0,b.jsx)(w,{variant:"filled",onClick:()=>{P(!1),x(!1),F(null)},children:"Annulla"})]})]})]})},C=()=>(0,b.jsx)(E,{})},966:(e,t,n)=>{n.d(t,{A:()=>A});var o,a,r,s,c,i=n(7528),l=n(5043),d=n(1970),u=n(927),p=n(579);const h=u.Ay.div(o||(o=(0,i.A)(["\nwidth: 98%;\nborder-radius: 8px;\nmargin: auto;\nbox-shadow: 0px 8px 16px rgba(0, 0, 0, 0.1)"]))),f=u.Ay.div(a||(a=(0,i.A)(["\nborder-radius: 8px;\noverflow: auto;\nmax-height: calc(100vh - 150px);\n"]))),m=u.Ay.table(r||(r=(0,i.A)(["\n    width: 100%;\n    margin: auto;\n    border-collapse: collapse;\n    border-spacing: 0;\n    border-radius: 8px;\n\n    \n    th {\n        // background-color: #ffffff;\n        background-color: #c1c1c1a6;\n        backdrop-filter: blur(5px);    \n        position: sticky;\n        top: 0; \n        padding: 12px 8px;\n        text-align: left; \n        font-weight: bold;\n    }\n\n    td {\n        padding: 12px 8px;\n        text-align: left;\n    }\n\n    tr {\n        background-color: #fff;\n        // background-color: #f0f0f05c;\n    }\n\n    tr:hover {\n        background-color: #f7f7f7;\n    }\n"]))),y=u.Ay.h2(s||(s=(0,i.A)(["\ntext-align: center;"]))),v=u.Ay.small(c||(c=(0,i.A)(["\nfloat: right;\n"]))),A=e=>{let{content:t,headers:n}=e;const[o,a]=(0,l.useState)(!1),[r,s]=(0,l.useState)(null),[c,i]=(0,l.useState)(0);return(0,l.useEffect)((()=>{(async()=>{await(async()=>{a(!0)})(),i(t.length);const e=await(async e=>e&&e.length?e.map(((e,t)=>(0,p.jsx)("tr",{children:n.map(((t,n)=>(0,p.jsx)("td",{children:e[t]},n)))},t))):(0,p.jsx)(y,{children:"No selection"},0))(t);s(e),a(!1)})()}),[t,n]),(0,p.jsxs)(h,{className:"table-container",children:[(0,p.jsx)(f,{className:"table-show",children:o?(0,p.jsx)(d.A,{}):t&&(0,p.jsxs)(m,{className:"data-table",children:[(0,p.jsx)("thead",{children:(0,p.jsx)("tr",{children:n.map(((e,t)=>(0,p.jsx)("th",{children:e},t)))})}),(0,p.jsx)("tbody",{children:r})]})}),c?(0,p.jsxs)(v,{className:"rows-counter",children:[c," righe"]}):null]})}},1411:(e,t,n)=>{var o=n(4994);t.A=void 0;var a=o(n(39)),r=n(579);t.A=(0,a.default)((0,r.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zm3.17-6.41a.9959.9959 0 0 1 0-1.41c.39-.39 1.02-.39 1.41 0L12 12.59l1.41-1.41c.39-.39 1.02-.39 1.41 0s.39 1.02 0 1.41L13.41 14l1.41 1.41c.39.39.39 1.02 0 1.41s-1.02.39-1.41 0L12 15.41l-1.41 1.41c-.39.39-1.02.39-1.41 0a.9959.9959 0 0 1 0-1.41L10.59 14zM18 4h-2.5l-.71-.71c-.18-.18-.44-.29-.7-.29H9.91c-.26 0-.52.11-.7.29L8.5 4H6c-.55 0-1 .45-1 1s.45 1 1 1h12c.55 0 1-.45 1-1s-.45-1-1-1"}),"DeleteForeverRounded")},8939:(e,t,n)=>{var o=n(4994);t.A=void 0;var a=o(n(39)),r=n(579);t.A=(0,a.default)((0,r.jsx)("path",{d:"M3 17.46v3.04c0 .28.22.5.5.5h3.04c.13 0 .26-.05.35-.15L17.81 9.94l-3.75-3.75L3.15 17.1c-.1.1-.15.22-.15.36M20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"EditRounded")},3187:(e,t,n)=>{var o=n(4994);t.A=void 0;var a=o(n(39)),r=n(579);t.A=(0,a.default)((0,r.jsx)("path",{d:"M12 4C7 4 2.73 7.11 1 11.5 2.73 15.89 7 19 12 19s9.27-3.11 11-7.5C21.27 7.11 17 4 12 4m0 12.5c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"VisibilityRounded")},39:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o.createSvgIcon}});var o=n(4962)},4962:(e,t,n)=>{n.r(t),n.d(t,{capitalize:()=>a.A,createChainedFunction:()=>r,createSvgIcon:()=>s.A,debounce:()=>c.A,deprecatedPropType:()=>i,isMuiElement:()=>l.A,ownerDocument:()=>d.A,ownerWindow:()=>u.A,requirePropFactory:()=>p,setRef:()=>h,unstable_ClassNameGenerator:()=>g,unstable_useEnhancedEffect:()=>f.A,unstable_useId:()=>m,unsupportedProp:()=>y,useControlled:()=>v.A,useEventCallback:()=>A.A,useForkRef:()=>x.A,useIsFocusVisible:()=>b.A});var o=n(5430),a=n(6803);const r=n(4708).A;var s=n(9662),c=n(950);const i=function(e,t){return()=>null};var l=n(154),d=n(2427),u=n(6078);n(8168);const p=function(e,t){return()=>null};const h=n(9184).A;var f=n(5013);const m=n(992).A;const y=function(e,t,n,o,a){return null};var v=n(4516),A=n(3319),x=n(5849),b=n(2191);const g={configure:e=>{o.A.configure(e)}}}}]);
//# sourceMappingURL=853.6c5a8460.chunk.js.map